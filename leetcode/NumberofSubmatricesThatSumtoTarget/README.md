# Problem

[Number of Submatrices That Sum to Target](https://leetcode.com/problems/number-of-submatrices-that-sum-to-target/)

# Idea

그리드 `G[][]` 와 숫자 `T` 가 주어진다. 합이 `T` 와 같은 부분 사각형의 개수를
구하는 문제이다.

먼저 일차원 배열에서 비슷한 경우를 살펴보자. 이것은 [Subarray Sum
Equals K](/leetcode/SubarraySumEqualsK/a.cpp) 풀이법과 일치한다.

일차원 배열 `V[] = (3, 4, 7, 2)` 가 주어지고 합이 `K = 7` 와 같은 부분
수열의 개수를 구해보자.

인덱스 `i` 가 하나씩 증가할 때마다 누적된 합을 `sum` 이라고 하자.
그렇다면 `X + T = sum` 라고 할 수 있다. `X` 와 같은 `sum` 이
존재했었다면 `X` 의 개수가 곧 `V[i]` 로 끝나는 부분수열들 중 합이 `T`
와 같은 것의 개수가 된다.  이 개수를 `r` 에 누적하여 더하면 `r` 이 곧
답이된다.

예를 들어 `V[] = (3, 4, 3, 4), T = 7` 에서 `i == 2` 인 경우를
살펴보자. `3 4` 에서 `3 4 3` 이 되었으므로 새로운 부분 수열은 `3` 으로
끝나는 `(3, 4, 3), (4, 3), (3)` 이 된다. 이것들 중 합이 `T` 와 같은
것을 찾아야 한다. `X = sum - T` 이기 때문에 예전에 발생한 `sum` 중 `X`
와 같은 것의 개수는 1 이 되고 이것을 `r` 에 더한다.

다음은 언급한 예의 처리과정이다.

```
   T: 7
                i            i            i            i
   V: 3 4 3 4   3 4 3 4    3 4 3 4    3 4 3 4    3 4 3 4
 sum: 0         3          7          14         16
cnts: 0         0 3        0 3 7      0 3 7 14   0 3 7 14 16
      1         1 1        1 1 1      1 1 1  1   1 1 1  1  1
   r: 0         0          1          2          2
```

이제 `G[][]` 의 각 행에 대한 부분합을 구한다. 그리고 열을 두개씩 짝지어서
prefix sum 을 구하여 누적하여 더하면 곧 답이 된다.

# Implementation

* [c++11](a.cpp)

# Complexity

```
O(N^3) O(N)
```

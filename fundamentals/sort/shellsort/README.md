# Abstract

shell sort 는 1959년 도널드 셸이 발표한 정렬 알고리즘이다.  삽입정렬을
개선한 방법이다.  삽입정렬은 미리 정렬되어 있는 수열일 수록 성능이
좋다. shell sort 는 간격 `h` 를 줄여가면서 듬성듬성 삽입정렬을
수행한다.  `h` 가 1 이 되면 마침내 정렬이 된다. `h` 를 고려하지 않는다면
시간복잡도는 `O(N^2)` 이다.

# Problem

수열 `V` 가 주어지면 shell sort 를 이용하여
정렬해보자.

# Idea

다음과 같은 수열 `V` 가 주어진다.

```
1 5 4 3 13 14 15 2 10 11 12 7 6 8 9
```

간격 `h` 다음과 같은 방법으로 수열의 개수 `n` 을 이용하여 구한다.
`n = 15` 이면 `h` 는 4 부터 시작한다.

```
  // 3x+1 increment sequence: 1, 4, 13, 40, 121, 364, 1093,...
  while (h < n/3)
    h = 3 * h + 1;
```

`h = 4` 로 다음과 같이 그룹화 하자. 

```
 1  5  4 3 
13 14 15 2 
10 11 12 7 
 6  8  9
```

인덱스 `i, j` 를 이용하여 `i` 가 위치한 열을 `j` 행부터 `1` 행까지 거꾸로 순회
하면서 삽입정렬을 한다. 모든 순회를 마치면 간격 `h = 4` 에 대한 각 열은 모두 정렬된다.

```
h: 4

   1  5  4 3     1  5  4 3     1  5  4 3     1  5  4 2
   i                i                i               i
j 13 14 15 2  j 13 14 15 2  j 13 14 15 2  j 13 14 15 3
  10 11 12 7    10 11 12 7    10 11 12 7    10 11 12 7
   6  8  9       6  8  9       6  8  9       6  8  9

   1  5  4 2     1  5  4 2     1  5  4 2     1  5  4 2
  10 14 15 3    10 11 15 3    10 11 12 3    10 11 12 3
   i                i                i               i
j 13 11 12 7  j 13 14 12 7  j 13 14 15 7  j 13 14 15 7
   6  8  9       6  8  9       6  8  9       6  8  9

   1  5  4 2     1  5  4 2     1  5  4 2     1  5  4 2
  10 11 12 3     6 11 12 3     6 11 12 3     6  8 12 3
   6 14 15 7  j 10 14 15 7    10  8 15 7  j 10 11 15 7
   i             i                i             i
j 13  8  9      13  8  9    j 13 14  9      13 14  9

   1  5  4 2     1  5  4 2 
   6  8 12 3     6  8  9 3 
  10 11  9 7  j 10 11 12 7 
         i             i   
j 13 14 15      13 14 15   
```

간격 `h` 를 1 로 해서 그룹화 하자. 하나의 그룹이 하나의 원소로 이루어져 있다.
삽입정렬한다.

```
   1       1        1       1       1       1       1 
   i       4        4       2       2       2       2
j  5       i        2    j  4       4       3       3
   4    j  5        i       i       5       4       4
   2       2     j  5       5       6       5       5
   6       6        6       6       8       6       6
   8       8        8       8       3       8       7
   9       9        9       9       i       9       8
   3       3        3       3    j  9      10       9
  10      10       10      10      10      11      10
  11      11       11      11      11       7      11
  12      12       12      12      12       i      12
   7       7        7       7       7    j 12      13
  13      13       13      13      13      13      14
  14      14       14      14      14      14       i
  15      15       15      15      15      15    j 15
```

# Implementation

* [c++1](a.cpp)

# Complexity

```
O(N^2) O(1)
```
